{% extends 'patient/base.html.twig' %}
{% block title %}
	{{ 'appointment_history_label'|trans }} | {{ 'app_name'|trans }}
{% endblock %}
{% block content %}
	<div class="text-center mt-4">
		<h2>{{ 'appointment_history_label'|trans }}</h2>
	</div>
	<div class="col-xl-6 col-md-7 mt-5 mx-auto">
		<table class="table bg-white">
			<thead class="bg-light">
				<tr>
					<th>{{ 'specialty_label'|trans }}</th>
					<th>{{ 'doctor_label'|trans }}</th>
					<th>{{ 'date_label'|trans }}</th>
					<th>{{ 'time_label'|trans }}</th>
					<th>{{ 'price_label'|trans }}</th>
					<th>{{ 'status_label'|trans }}</th>
					<th></th>
				</tr>
			</thead>
			<tbody>
				{% if scheduleSlots|length == 0 %}
					<tr>
						<td colspan="6" class="text-center">
							{{ 'no_appointments_label'|trans }}
						</td>
					</tr>
				{% endif %}

				{% for scheduleSlot in scheduleSlots %}
					<tr>
						<td>
							{{ scheduleSlot.doctor.specialty.name }}
						</td>
						<td>
							{{ scheduleSlot.doctor.name }}
						</td>
						<td>
							{{ scheduleSlot.start|date("Y-m-d") }}
						</td>
						<td>
							{{ scheduleSlot.start|date("H:i") }}
							-
							{{ scheduleSlot.end|date("H:i") }}
						</td>
						<td>
							{{ scheduleSlot.price }}$
						</td>
						<td>
							{% if scheduleSlot.status.value == constant('App\\Enum\\Status::Paid').value %}
								<div>{{ 'paid_label'|trans }}</div>
							{% else %}
								<div>{{ 'not_paid_label'|trans }}</div>
							{% endif %}
						</td>
						<td>
							{% if scheduleSlot.status.value == constant('App\\Enum\\Status::NotPaid').value %}
								<a href="{{ scheduleSlot.paymentLink }}" class="link-underline link-underline-opacity-0" target="_blank">
									{{ 'pay_label'|trans }}
								</a>
							{% else %}
								<a href="{{ path('patient_show_appointment_details', {'slotId': scheduleSlot.id}) }}" class="link-underline link-underline-opacity-0" target="_blank">
									{{ 'view_label'|trans }}
								</a>
							{% endif %}
						</td>
					</tr>
				{% endfor %}
			</tbody>
		</table>
	</div>
{% endblock %}
